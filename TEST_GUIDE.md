# 🧪 GitHub Gist 集成功能测试指南

## 🚀 开发服务器已启动

**访问地址**: http://localhost:5174/

---

## 📋 测试前准备

### 1. 准备 GitHub Personal Access Token

1. 访问 GitHub: https://github.com/settings/tokens
2. 点击 "Generate new token" → "Generate new token (classic)"
3. 配置 Token:
   - **Note**: 输入描述，如 "Personal Knowledge Website Test"
   - **Expiration**: 选择过期时间
   - **Select scopes**: 勾选 `gist` 权限
4. 生成并复制 Token（格式如 `ghp_xxxxxxxxxxxx`）

### 2. 清空浏览器数据（可选）

如果要测试首次配置流程：
- 打开浏览器开发者工具 (F12)
- Application → Local Storage → 清除所有数据

---

## 🧪 核心功能测试清单

### ✅ 测试 1: 首次配置流程

**目标**: 验证新用户配置向导

**步骤**:
1. [ ] 访问 http://localhost:5174/
2. [ ] 验证：自动显示配置向导
3. [ ] 点击"拥有者模式"
4. [ ] 输入准备好的 GitHub Token
5. [ ] 点击"验证并保存"
6. [ ] 验证：显示验证成功和用户名
7. [ ] 如果有本地数据，选择是否迁移
8. [ ] 验证：进入主应用界面

**预期结果**: ✅ 配置成功，进入拥有者模式

---

### ✅ 测试 2: 数据创建和同步

**目标**: 验证 CRUD 操作和自动同步

**步骤**:
1. [ ] 在主页点击"添加资源"
2. [ ] 填写资源信息（标题、URL、分类等）
3. [ ] 保存资源
4. [ ] 验证：资源显示在列表中
5. [ ] 观察顶部同步状态指示器
6. [ ] 验证：3秒后显示"同步中"
7. [ ] 验证：同步完成后显示"已同步"和时间

**预期结果**: ✅ 数据创建成功并自动同步

---

### ✅ 测试 3: 手动同步

**目标**: 验证手动触发同步

**步骤**:
1. [ ] 点击顶部的同步状态指示器
2. [ ] 点击"手动同步"按钮
3. [ ] 验证：立即显示"同步中"状态
4. [ ] 验证：同步完成后更新时间戳

**预期结果**: ✅ 手动同步成功

---

### ✅ 测试 4: 设置页面

**目标**: 验证设置页面功能

**步骤**:
1. [ ] 访问 http://localhost:5174/settings
2. [ ] 验证：显示当前用户信息
3. [ ] 验证：显示 Gist ID
4. [ ] 验证：显示最后同步时间
5. [ ] 点击"导出数据"
6. [ ] 验证：下载 JSON 文件
7. [ ] 查看"存储使用情况"
8. [ ] 验证：显示数据统计

**预期结果**: ✅ 设置页面功能正常

---

### ✅ 测试 5: 版本历史（如果有多次修改）

**目标**: 验证版本历史功能

**步骤**:
1. [ ] 在设置页面点击"查看版本历史"
2. [ ] 验证：显示版本列表
3. [ ] 点击一个版本
4. [ ] 验证：显示版本详情和数据统计
5. [ ] 点击"恢复到此版本"
6. [ ] 确认恢复
7. [ ] 验证：显示恢复成功提示

**预期结果**: ✅ 版本历史功能正常

---

### ✅ 测试 6: 分享功能

**目标**: 验证生成和使用分享链接

**步骤**:
1. [ ] 在主页点击"分享"按钮
2. [ ] 验证：显示"链接已复制"提示
3. [ ] 打开新的隐身窗口
4. [ ] 粘贴分享链接并访问
5. [ ] 验证：自动以访客模式加载
6. [ ] 验证：显示"访客模式"标识
7. [ ] 验证：不显示编辑/删除按钮

**预期结果**: ✅ 分享功能正常

---

### ✅ 测试 7: 访客模式

**目标**: 验证访客模式功能

**步骤**:
1. [ ] 清空 LocalStorage
2. [ ] 访问 http://localhost:5174/
3. [ ] 选择"访客模式"
4. [ ] 输入一个公开的 Gist ID
5. [ ] 点击"开始浏览"
6. [ ] 验证：成功加载数据
7. [ ] 验证：所有编辑功能被隐藏
8. [ ] 点击"切换到拥有者模式"
9. [ ] 验证：显示 Token 配置页面

**预期结果**: ✅ 访客模式功能正常

---

### ✅ 测试 8: 离线支持

**目标**: 验证离线功能

**步骤**:
1. [ ] 确保数据已同步
2. [ ] 打开浏览器开发者工具
3. [ ] Network → 勾选 "Offline"
4. [ ] 创建或编辑一个资源
5. [ ] 验证：操作成功，数据保存到本地
6. [ ] 验证：显示离线状态提示
7. [ ] 取消 "Offline" 模式
8. [ ] 验证：自动触发同步
9. [ ] 验证：同步成功

**预期结果**: ✅ 离线支持正常

---

### ✅ 测试 9: 错误处理

**目标**: 验证错误处理

**步骤**:
1. [ ] 在 GitHub 撤销 Token
2. [ ] 在应用中进行操作
3. [ ] 验证：显示"Token 已失效"错误
4. [ ] 验证：提示重新配置
5. [ ] 点击重新配置
6. [ ] 验证：进入 Token 配置页面

**预期结果**: ✅ 错误处理正常

---

### ✅ 测试 10: 数据压缩（大数据量）

**目标**: 验证数据压缩功能

**步骤**:
1. [ ] 创建 10+ 个资源（每个包含较长描述）
2. [ ] 打开浏览器开发者工具 Console
3. [ ] 观察同步时的日志
4. [ ] 验证：如果数据 > 50KB，显示压缩信息
5. [ ] 刷新页面
6. [ ] 验证：数据正确加载和解压

**预期结果**: ✅ 数据压缩功能正常

---

## 🔍 测试页面

### 专用测试页面

1. **Gist 服务测试**: http://localhost:5174/gist-test
   - 测试 Token 验证
   - 测试 Gist CRUD 操作

2. **Gist 集成测试**: http://localhost:5174/gist-integration-test
   - 测试完整集成流程
   - 测试同步功能

3. **设置页面**: http://localhost:5174/settings
   - 测试所有设置功能
   - 测试数据导出/导入

4. **配置向导**: http://localhost:5174/setup
   - 测试配置流程
   - 测试模式切换

---

## 🐛 常见问题排查

### 问题 1: Token 验证失败
**解决方案**:
- 检查 Token 是否正确复制
- 确认 Token 有 `gist` 权限
- 检查 Token 是否过期

### 问题 2: 同步失败
**解决方案**:
- 检查网络连接
- 查看浏览器 Console 的错误信息
- 检查 GitHub API 速率限制

### 问题 3: 数据未显示
**解决方案**:
- 刷新页面
- 检查 LocalStorage 中的数据
- 手动触发同步

### 问题 4: 配置向导不显示
**解决方案**:
- 清空 LocalStorage
- 访问 /setup 路由

---

## 📊 性能检查

### 使用 Chrome DevTools

1. **打开 Lighthouse**:
   - F12 → Lighthouse 标签
   - 选择 Performance
   - 点击 "Analyze page load"

2. **检查指标**:
   - [ ] FCP < 1秒
   - [ ] LCP < 2秒
   - [ ] TTI < 2秒
   - [ ] 性能评分 > 90

3. **检查网络**:
   - F12 → Network 标签
   - 观察 API 调用
   - 检查数据传输大小

---

## ✅ 验收标准

### 功能完整性
- [ ] 所有 CRUD 操作正常
- [ ] 自动同步功能正常
- [ ] 手动同步功能正常
- [ ] 离线支持正常
- [ ] 版本历史功能正常
- [ ] 分享功能正常
- [ ] 模式切换正常
- [ ] 错误处理正常

### 用户体验
- [ ] 加载速度快（< 2秒）
- [ ] 操作响应及时
- [ ] 错误提示清晰
- [ ] 同步状态明确
- [ ] 界面友好直观

### 数据安全
- [ ] Token 加密存储
- [ ] 数据验证正确
- [ ] 无数据丢失
- [ ] 冲突处理正确

---

## 📝 测试报告模板

### 测试信息
- **测试日期**: ____
- **测试人员**: ____
- **浏览器**: ____
- **测试环境**: 开发环境

### 测试结果
- **通过测试**: __ / 10
- **失败测试**: __ / 10
- **发现问题**: __ 个

### 问题列表
1. **问题描述**: ____
   - **严重程度**: 高/中/低
   - **复现步骤**: ____
   - **截图**: ____

### 总体评价
- [ ] 功能完整
- [ ] 性能良好
- [ ] 用户体验佳
- [ ] 可以上线

---

## 🎉 测试完成后

如果所有测试通过：
1. ✅ 功能验收完成
2. ✅ 可以部署到生产环境
3. ✅ 准备用户文档和培训材料

---

**祝测试顺利！** 🚀

如有问题，请查看：
- `docs/user-guides/GIST_SETUP_GUIDE.md` - 用户指南
- `docs/development/GIST_INTEGRATION.md` - 技术文档
- `docs/testing/E2E_TEST_SCENARIOS.md` - 详细测试场景
