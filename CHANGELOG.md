# 更新日志

本文档记录项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 改进
- 🔧 **增强 Gist ID 验证和错误提示**
  - 改进 Gist ID 格式验证（支持 20-40 位十六进制字符）
  - 增强错误消息分类（格式错误、网络错误、验证错误）
  - 提供详细的错误指导和修复建议
  - 改进 gistService 错误处理（区分 404、403、401、429、5xx 等错误）
  - 添加格式错误时的额外帮助信息
  - 优化错误显示 UI（图标、分类、建议）
  - 添加属性测试确保验证逻辑正确性

- 🔧 **修复访客模式同步功能**
  - 允许访客模式从 Gist 拉取数据（只读同步）
  - 在 Gist 数据管理区域添加同步按钮
  - 访客模式：只能从 Gist 拉取最新数据
  - 拥有者模式：支持双向同步（需要认证）
  - 添加同步进度显示
  - 同步成功后自动刷新页面显示新数据

- 🔧 **移除手动数据验证功能**
  - 从设置页面移除数据修复/验证的 UI 入口
  - 保留后台自动验证逻辑（云端同步和数据导入时使用）
  - 简化用户界面，减少不必要的手动操作

### 新增功能
- ✨ **Gist 设置页面管理功能**
  - 在设置页面直接输入和管理 Gist ID
  - 显示当前 Gist 详细信息（ID、描述、创建时间、所有者等）
  - 生成分享链接功能（一键复制到剪贴板）
  - 断开 Gist 连接功能（保留本地数据）
  - 访客模式和拥有者模式的不同体验
  - 实时格式验证和字符计数
  - 详细的加载进度显示
  - 完善的错误处理和用户反馈

- ✨ 权限控制系统
  - 实现双模式权限控制（访客模式 / 拥有者模式）
  - QuestionModalWithEdit 组件完整权限控制
  - SubQuestion 组件权限控制
  - 权限测试页面 `/permission-test`
  - 详细的测试文档和实现文档

### 改进
- 🎨 访客模式下隐藏所有编辑、删除、添加按钮
- 🎨 拥有者模式下显示所有编辑功能
- 📝 添加 Gist 设置页面使用指南
- 📝 添加权限控制测试指南
- 📝 添加权限控制实现总结文档
- 📝 添加兼容性测试文档

### 修复
- 🐛 **断开连接后模式显示问题**
  - 修复断开连接后页面显示"创建或连接 Gist"而不是"输入 Gist ID"的问题
  - 断开连接后自动切换到访客模式
  
- 🐛 **URL 参数加载模式切换问题**
  - 修复通过 URL 参数加载 Gist 时不切换到访客模式的问题
  - 确保分享链接始终以访客模式打开

## [1.1.0] - 2025-11-16

### 新增功能
- ✨ 平台自动填充功能
  - YouTube 视频信息自动获取（标题、作者、封面）
  - Bilibili 视频信息自动获取（标题、UP主、封面）
  - GitHub 仓库信息自动获取（名称、作者、描述）
  - 智能填充规则（不覆盖已有内容）

- ✨ UI 设计系统
  - 统一的设计令牌（颜色、字体、间距、圆角）
  - 更新的按钮样式（20px 圆角）
  - 更新的卡片样式（16px 圆角）
  - 更新的模态框样式
  - 更新的表单组件样式

### 修复
- 🐛 Bilibili 封面防盗链问题
  - 添加 Vite 图片代理解决防盗链
  - HTTP 转 HTTPS 自动转换
  - 空封面使用占位图备用
  
- 🐛 Bilibili API CORS 问题
  - 添加 Vite API 代理
  - 支持开发环境无 CORS 限制

- 🐛 分类筛选功能修复
  - 修复分类筛选逻辑
  - 优化分类显示

### 改进
- 📚 文档结构重组
  - 将根目录文档整理到 docs/ 目录
  - 按功能、故障排除、指南分类
  - 添加完整的文档索引
  - 更新 README.md

- 🎨 UI 组件优化
  - 卡片组件统一样式
  - 按钮组件统一样式
  - Toast 通知优化
  - 模态框动画优化

### 技术改进
- ⚡ 添加详细的调试日志
- ⚡ 改进错误处理
- ⚡ 优化代理配置

## [1.0.0] - 2025-11-14

### 新增功能

#### 核心功能
- ✨ 资源管理系统
  - 资源收藏和分类
  - 标签筛选和搜索
  - 资源卡片展示
  - 封面图支持

- ✨ 问答管理系统
  - 大问题和子问题管理
  - 时间线式回答记录
  - 问题状态跟踪
  - Markdown 格式支持

- ✨ GitHub Gist 云端同步
  - 自动增量同步
  - 手动同步和强制同步
  - 离线编辑支持
  - 数据加密和验证

- ✨ 双模式支持
  - 拥有者模式（完整权限）
  - 访客模式（只读访问）
  - 模式切换和指示

- ✨ 数据管理
  - JSON 数据导入/导出
  - 版本历史查看
  - 数据备份和恢复
  - 缓存管理

#### 用户界面
- 🎨 现代化响应式设计
- 🎨 Tailwind CSS 样式系统
- 🎨 深色模式支持（计划中）
- 🎨 移动端适配

#### 用户体验
- ⚡ 懒加载优化
- ⚡ 防抖和节流
- ⚡ 加载状态提示
- ⚡ Toast 通知系统
- ⚡ 错误处理和重试

#### 开发体验
- 🛠️ TypeScript 类型安全
- 🛠️ ESLint 代码规范
- 🛠️ 组件化架构
- 🛠️ Context API 状态管理

### 技术实现

#### 前端技术
- React 18.3 + TypeScript 5.5
- Tailwind CSS 3.4
- React Router 6.26
- Vite 5.4

#### 数据存储
- IndexedDB (localforage)
- GitHub Gist API
- 本地缓存策略

#### 性能优化
- 代码分割和懒加载
- 图片懒加载
- 防抖和节流
- 虚拟滚动（计划中）

### 文档

- 📚 完整的用户指南
- 📚 开发文档
- 📚 API 文档
- 📚 部署指南
- 📚 贡献指南

### 测试

- ✅ 单元测试框架
- ✅ E2E 测试场景
- ✅ 性能测试
- ✅ 错误处理测试

### 部署

- 🚀 Vercel 部署支持
- 🚀 Netlify 部署支持
- 🚀 GitHub Pages 支持
- 🚀 Docker 支持（计划中）

## [未来计划]

### v1.1.0 (计划中)

#### 功能增强
- [ ] 深色模式
- [ ] 多语言支持（英文）
- [ ] 高级搜索
- [ ] 标签管理
- [ ] 批量操作

#### 性能优化
- [ ] 虚拟滚动
- [ ] Service Worker
- [ ] PWA 支持
- [ ] 图片压缩

#### 用户体验
- [ ] 键盘快捷键
- [ ] 拖拽排序
- [ ] 批量导入
- [ ] 数据统计

### v1.2.0 (计划中)

#### 高级功能
- [ ] 协作功能
- [ ] 评论系统
- [ ] 标签云
- [ ] 关系图谱

#### 集成
- [ ] Notion 导入
- [ ] Markdown 文件导入
- [ ] RSS 订阅
- [ ] 浏览器扩展

## 版本说明

### 版本号规则

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 变更类型

- **新增**：新功能
- **变更**：对现有功能的变更
- **废弃**：即将移除的功能
- **移除**：已移除的功能
- **修复**：Bug 修复
- **安全**：安全相关的修复

---

**最后更新**：2025-11-14
