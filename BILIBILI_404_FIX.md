# Bilibili -404 é”™è¯¯ä¿®å¤æŒ‡å—

## ğŸ› é—®é¢˜

æµ‹è¯• Bilibili è§†é¢‘æ—¶æ”¶åˆ°é”™è¯¯ï¼š
```json
{
  "code": -404,
  "message": "å•¥éƒ½æœ¨æœ‰",
  "ttl": 1
}
```

## ğŸ” åŸå› åˆ†æ

**-404 é”™è¯¯è¡¨ç¤ºè§†é¢‘ä¸å­˜åœ¨**ï¼Œå¯èƒ½çš„åŸå› ï¼š

1. âœ… **ä»£ç†é…ç½®æ­£å¸¸å·¥ä½œ**ï¼ˆèƒ½å¤ŸæˆåŠŸè°ƒç”¨ APIï¼‰
2. âŒ **æµ‹è¯•è§†é¢‘å·²è¢«åˆ é™¤æˆ–å¤±æ•ˆ**ï¼ˆBV1GJ411x7h7ï¼‰
3. âš ï¸ **éœ€è¦ä½¿ç”¨æœ‰æ•ˆçš„è§†é¢‘ BV å·**

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨æœ‰æ•ˆçš„æµ‹è¯•è§†é¢‘ï¼ˆæ¨èï¼‰

æˆ‘å·²ç»æ›´æ–°äº†æµ‹è¯•é¡µé¢ï¼Œä½¿ç”¨æ–°çš„é»˜è®¤è§†é¢‘ï¼š

```
æ—§è§†é¢‘: BV1GJ411x7h7 âŒ (å·²å¤±æ•ˆ)
æ–°è§†é¢‘: BV1uv411q7Mv âœ… (å®˜æ–¹è§†é¢‘ï¼Œç¨³å®š)
```

### æ–¹æ¡ˆ 2: æ‰‹åŠ¨æµ‹è¯•å…¶ä»–è§†é¢‘

è®¿é—®æµ‹è¯•é¡µé¢å¹¶å°è¯•ä»¥ä¸‹è§†é¢‘ï¼š

```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 2. è®¿é—®æµ‹è¯•é¡µé¢
http://localhost:5173/platform-autofill-test

# 3. æµ‹è¯•ä»¥ä¸‹ä»»ä¸€è§†é¢‘
```

**æ¨èæµ‹è¯•è§†é¢‘**:

| BV å· | è¯´æ˜ | URL |
|-------|------|-----|
| BV1uv411q7Mv | å®˜æ–¹è§†é¢‘ï¼ˆæœ€ç¨³å®šï¼‰ | https://www.bilibili.com/video/BV1uv411q7Mv |
| BV1xx411c7mD | ç»å…¸éŸ³ä¹è§†é¢‘ | https://www.bilibili.com/video/BV1xx411c7mD |
| ä»»æ„çƒ­é—¨è§†é¢‘ | ä»é¦–é¡µé€‰æ‹© | https://www.bilibili.com |

### æ–¹æ¡ˆ 3: ä½¿ç”¨ç‹¬ç«‹æµ‹è¯•å·¥å…·

æ‰“å¼€ `test-bilibili-api.html` æ–‡ä»¶ï¼ˆåœ¨æµè§ˆå™¨ä¸­ï¼‰ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
open personal-knowledge-website/test-bilibili-api.html
```

è¿™ä¸ªå·¥å…·å¯ä»¥ï¼š
- ç›´æ¥æµ‹è¯• Bilibili API
- æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- æä¾›æ¨èçš„æµ‹è¯•è§†é¢‘

## ğŸ§ª éªŒè¯ä¿®å¤

### æ­¥éª¤ 1: æµ‹è¯•æ–°çš„é»˜è®¤è§†é¢‘

```bash
cd personal-knowledge-website
npm run dev
```

è®¿é—®: `http://localhost:5173/platform-autofill-test`

ç‚¹å‡»"æµ‹è¯• Bilibili"ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
âœ… æˆåŠŸè·å–ä¿¡æ¯
æ ‡é¢˜: [è§†é¢‘æ ‡é¢˜]
UPä¸»: [UPä¸»åç§°]
å°é¢: [æ˜¾ç¤ºå°é¢å›¾]
```

### æ­¥éª¤ 2: åœ¨å®é™…ç¼–è¾‘å™¨ä¸­æµ‹è¯•

1. ä¸»é¡µ â†’ "æ·»åŠ èµ„æº"
2. URL: `https://www.bilibili.com/video/BV1uv411q7Mv`
3. ç±»å‹: "Bilibili è§†é¢‘"
4. ç‚¹å‡»"è‡ªåŠ¨å¡«å……"
5. åº”è¯¥è‡ªåŠ¨å¡«å……æ ‡é¢˜ã€ä½œè€…å’Œå°é¢

### æ­¥éª¤ 3: æµ‹è¯•è‡ªå®šä¹‰è§†é¢‘

1. è®¿é—® Bilibili é¦–é¡µ
2. é€‰æ‹©ä»»æ„çƒ­é—¨è§†é¢‘
3. å¤åˆ¶ URL
4. åœ¨æµ‹è¯•é¡µé¢æˆ–ç¼–è¾‘å™¨ä¸­æµ‹è¯•

## ğŸ“Š é”™è¯¯ç å¯¹ç…§è¡¨

| é”™è¯¯ç  | å«ä¹‰ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 0 | æˆåŠŸ | âœ… æ­£å¸¸ |
| -404 | è§†é¢‘ä¸å­˜åœ¨ | æ›´æ¢æœ‰æ•ˆçš„ BV å· |
| -403 | æƒé™ä¸è¶³ | è§†é¢‘éœ€è¦ç™»å½•æˆ–å·²è¢«é™åˆ¶ |
| -400 | è¯·æ±‚é”™è¯¯ | æ£€æŸ¥ BV å·æ ¼å¼ |
| -412 | è¯·æ±‚è¢«æ‹¦æˆª | å¯èƒ½éœ€è¦æ·»åŠ æ›´å¤šè¯·æ±‚å¤´ |

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### å½“å‰é…ç½®çŠ¶æ€

âœ… **Vite ä»£ç†å·²é…ç½®**
```typescript
'/api/bilibili': {
  target: 'https://api.bilibili.com',
  changeOrigin: true,
  rewrite: (path) => path.replace(/^\/api\/bilibili/, ''),
  headers: {
    'Referer': 'https://www.bilibili.com',
    'User-Agent': 'Mozilla/5.0 ...'
  }
}
```

âœ… **API è°ƒç”¨é€»è¾‘æ­£ç¡®**
```typescript
const apiUrl = import.meta.env.DEV
    ? `/api/bilibili/x/web-interface/view?bvid=${bvid}`
    : `https://api.bilibili.com/x/web-interface/view?bvid=${bvid}`;
```

âœ… **é”™è¯¯å¤„ç†å·²æ”¹è¿›**
- æ£€æµ‹ -404 é”™è¯¯
- æä¾›å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
- è®°å½•è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

### ä»£ç†å·¥ä½œæ­£å¸¸çš„è¯æ®

èƒ½å¤Ÿæ”¶åˆ° `-404` å“åº”è¯´æ˜ï¼š
1. âœ… ä»£ç†é…ç½®æ­£ç¡®
2. âœ… æˆåŠŸè¿æ¥åˆ° Bilibili API
3. âœ… æ²¡æœ‰ CORS é—®é¢˜
4. âŒ åªæ˜¯è§†é¢‘ BV å·æ— æ•ˆ

## ğŸ“ æ›´æ–°å†…å®¹

### å·²ä¿®æ”¹çš„æ–‡ä»¶

1. **src/pages/PlatformAutoFillTest.tsx**
   - æ›´æ–°é»˜è®¤æµ‹è¯•è§†é¢‘ä¸º `BV1uv411q7Mv`
   - æ”¹è¿›é”™è¯¯æç¤ºä¿¡æ¯

2. **src/utils/platformInfoUtils.ts**
   - æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
   - ç‰¹åˆ«å¤„ç† -404 é”™è¯¯

3. **æ–°å¢æ–‡ä»¶**
   - `BILIBILI_TEST_VIDEOS.md` - æµ‹è¯•è§†é¢‘åˆ—è¡¨
   - `test-bilibili-api.html` - ç‹¬ç«‹æµ‹è¯•å·¥å…·
   - `BILIBILI_404_FIX.md` - æœ¬æ–‡æ¡£

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **ç«‹å³æµ‹è¯•**: è¿è¡Œ `npm run dev` å¹¶è®¿é—®æµ‹è¯•é¡µé¢
2. **ä½¿ç”¨æ–°è§†é¢‘**: æµ‹è¯• `BV1uv411q7Mv` æˆ–å…¶ä»–æœ‰æ•ˆè§†é¢‘
3. **éªŒè¯åŠŸèƒ½**: ç¡®è®¤èƒ½å¤ŸæˆåŠŸè·å–æ ‡é¢˜ã€UPä¸»å’Œå°é¢
4. **åé¦ˆç»“æœ**: å‘Šè¯‰æˆ‘æµ‹è¯•ç»“æœ

## ğŸ’¬ é¢„æœŸç»“æœ

ä½¿ç”¨æœ‰æ•ˆçš„è§†é¢‘ BV å·åï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
[Bilibili] BV å·: BV1uv411q7Mv
[Bilibili] API URL: /api/bilibili/x/web-interface/view?bvid=BV1uv411q7Mv
[Bilibili] API å“åº”: { code: 0, data: { title: "...", owner: { name: "..." }, pic: "..." } }
```

âœ… **æˆåŠŸè·å–ä¿¡æ¯**
- æ ‡é¢˜: [è§†é¢‘æ ‡é¢˜]
- UPä¸»: [UPä¸»åç§°]
- å°é¢: [å°é¢å›¾ç‰‡]

---

**é—®é¢˜çŠ¶æ€**: âœ… å·²è¯†åˆ«ï¼ˆè§†é¢‘å¤±æ•ˆï¼‰
**è§£å†³æ–¹æ¡ˆ**: âœ… å·²æä¾›ï¼ˆä½¿ç”¨æœ‰æ•ˆè§†é¢‘ï¼‰
**éœ€è¦æ“ä½œ**: ğŸ§ª æµ‹è¯•æ–°è§†é¢‘
